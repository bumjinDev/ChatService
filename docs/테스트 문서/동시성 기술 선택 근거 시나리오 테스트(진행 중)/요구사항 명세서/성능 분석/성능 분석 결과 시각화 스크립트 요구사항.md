# 성능 분석 결과 시각화 스크립트 요구사항 (v1.2)

### **1. 개요 (Overview)**

-   **목표:** `calculate_performance_stats.py`가 생성한 통계 데이터 Excel 파일(`*_stats.xlsx`)들을 입력받아, 3가지 핵심 성능 분석 차트를 생성하고 이미지 파일로 저장하는 Python 스크립트를 개발한다.
-   **스크립트명:** `visualize_performance.py`
-   **출력 위치:** 스크립트 실행 위치에 `performance_charts` 디렉토리를 생성하고, 그 안에 결과물을 저장한다.

---

### **2. 입력 데이터 및 라이브러리**

-   **입력:** 하나 이상의 통계 데이터 Excel 파일 (`*_stats.xlsx`).
-   **라이브러리:** `pandas`, `matplotlib`, `seaborn`

---

### **3. 핵심 요구사항: 차트 생성**

-   **입력된 각 Excel 파일의 데이터를 종합하여 다음 3개의 차트를 생성한다.**

#### **3.1. 차트 1: 누적 막대 차트 (성능 구성 비교)**
-   **목표:** 각 동시성 기법의 평균적인 성능 소요 시간을 '대기 시간'과 '실행 시간'으로 분해하여 비교한다.
-   **데이터 소스:** 각 Excel 파일의 **`Overall_Success_Stats`** 시트. `wait_time_ms`와 `dwell_time_ms`의 **`mean` 값**을 사용한다.
-   **파일명:** `performance_comparison_bar.png`

#### **3.2. 차트 2: 오차 막대를 포함한 막대 차트 (성능 안정성 비교)**
-   **목표:** 가장 일반적인 성능(중앙값)과 최악의 경우(최대값)를 함께 표시하여 각 기법의 안정성을 비교한다.
-   **데이터 소스:** 각 Excel 파일의 **`Overall_Success_Stats`** 시트. `wait_time_ms`의 **`median`과 `max` 값**을 사용한다.
-   **파일명:** `latency_stability_chart.png`

#### **3.3. 차트 3: 라인 차트 (부하 누적에 따른 성능 변화)**
-   **목표:** 요청 처리 순서(부하 누적)에 따라 평균 대기 시간이 어떻게 변화하는지 추이를 분석한다.
-   **데이터 소스:** 각 Excel 파일의 **`Per_Bin_Stats`** 시트. `avg_wait_time(ms)` 값을 사용한다.
-   **차트 명세:**
    -   **종류:** 라인 차트 (Line Chart)
    -   **X축:** `bin` (요청 순서 구간, 1~10)
    -   **Y축:** 구간별 평균 대기 시간 (ms)
    -   **라인:** 각 동시성 기법별로 다른 색상이나 스타일의 라인으로 표시하고 범례를 추가한다.
    -   **기타:** 차트 제목("부하 누적에 따른 평균 대기 시간 변화"), 축 제목을 명확히 표기한다.
-   **파일명:** `wait_time_trend_by_bin.png`

---

### **4. 스크립트 실행 방법**

-   커맨드 라인 인자를 통해 실행한다.
    -   `--input_dir`: 통계 Excel 파일(`*_stats.xlsx`)이 위치한 디렉토리 경로.

    ```bash
    python visualize_performance.py \
        --input_dir "performance_reports/"
    ```

---

### **5. 최종 산출물 (Deliverables)**

-   `performance_charts` 디렉토리 안에 3개의 차트 이미지 파일이 저장되어야 한다.
    1.  `performance_comparison_bar.png`
    2.  `latency_stability_chart.png`
    3.  `wait_time_trend_by_bin.png`